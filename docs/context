
## **1. ðŸŽ¯ Objective**

Build a digital platform for **Simonâ€™s Freezer Meals (SFM)** that centralizes menu browsing, ordering, subscription management, and delivery tracking. The app should deliver a **seamless member experience** while reducing operational workload through **automation**.

---


## **1. ðŸ“š Database Schema**

- all this documentation reffers to @migrations folder, where we have in @initial_schema with all the tables. do check all the tables and relationships, triggers and functions first to understand the database structure.

### **A.**

### **Authentication & Accounts**

- **Sign-up/Login:** Email + password with verification.
- **Profile Management:** Name, email, phone, address(es), delivery zone.
- **Account Settings:** Notification preferences (email/SMS/push), payment method, invoices.

### **B.**

### **Subscription & Wallet**

- **Subscription Plans:** 6 tiers (from the subscription_plans table).
- **Plan Management:** Upgrade/downgrade, pause/resume, cancel, renew.
- **Wallet System:**
    - Monthly token deposits.
    - Rollover logic (cap = plan limit * 150%).
    - Token ledger (transaction history).
    - Optional top-up with extra tokens (cash purchase).

### **C.**

### **Dashboard (Home), after user logges in**

- Greeting message
- Will consist of a caroussel with all the menus (past/future ones and the one available) all from the menu_months table.
- Quick access buttons on the nav bar (User & Cart)
- User button will contain: Account Details, Wallet & Membership, Orders
        - Account Details: Personal Info (check users and user_adresses tables), Billing/Payment
        - Wallet & Membership: Token Balance, Membership (Active Plan, Change Plan, Pause/Resume (rules), Cancel, Renew)
        - Orders: Active Orders and Order history (check orders table for both), Invoice history of used tokens for the orders (check token_transactions table)
-
- Notifications (e.g. â€œNew menu live").
### **D.**

### **Menu & Ordering, after user clicks on the active menu from the home caroussel**
    **User cannot order until the users.user_assigned is true**
- **Menu Display:** 4â€“6 dishes per cycle
- **Dish Page:** Image, ingredients, nutrition, pairing/topping suggestions, preparation tips, user can choose protein version. (from the dishes table)
- **Ordering Flow:**
    - Add meals â†’ tokens deducted.
    - Cart + summary before checkout.
    - Confirmation (meals, delivery date, token balance).
- **Rules:** Order window cut-off dates, items limits(orders can be 8 12 18 20 24 28 items), group-based delivery linking (4 groups, the admin will assign eaach user to a group). Each user can order once a month. He will be assigned to one of four groups, therefore have a 1 week window to order.

### **E.**

### **Diet Preferences**

- Member selects dietary preferences (meat, pescatarian, vegan, vegetarian).
- Option to flag allergens, foods to avoid, and favorites.
- Menu filtered accordingly.
- Use tables user_allergens and user_dietary_preferences

### **F.**

### **Delivery**

- Delivery week auto-assigned by group (Group 1â€“4).
- Members can add only one primary address.
- Delivery notifications + status updates (prepping, packed, out for delivery).

---

## **3. ðŸ›  Backend/Admin Features (for Simon)**

- **Ingredient Database:** CRUD, nutritional data per 100g.
- **Dish Builder:** Tags, protein, ingredients, nutrition, instructions, recipe scaling, protein options.
- **Dish Library:** Search, filter, archive.
- **Menu Builder:** Pull dishes into monthly menu, set protein options, select from a calendar 4 time periods, for each group - this periods will determine the order window for each group.
- **Orders Dashboard:** Admin can filter orders by week + summary for total dishes of each kind (73 pizzas, 60 spicy chicken). Admin will start cooking a single dish type a time, so he will see the orders for that kind and can start cooking. After he gets done with that dish, he will set this dish as being cooked, and all the orders containing that dish will be marked as cooked. (not the full order cooked, just that dish). So users can track for their order the status of each dish.
- **Assigning a user to a group** (from the users, token_wallets, users_groups, user_subscriptions table): admin need 3 things before asigning a member to a group (plan type, adress, tokens active per each group)
- **Delivery Tools:** Member delivery sheet with notes (e.g. â€œleave by doorâ€).
- **Token & Member Management:** Adjust tokens manually, track churn.
- **Reporting (v2):** Popularity, profitability, engagement.

---

## **4. ðŸ“Š Success Metrics (KPIs)**

- **Ordering Completion:** >90%
- **Payment Success:** >98%
- **Avg. Time to Order:** <3 mins
- **Notification Delivery:** >99%
- **System Uptime:** 99%+
- **Error Rate:** <3%

---

## **5. ðŸ”§ Tech Requirements (optional)**

- **Frontend:** React/Next.js (responsive web, mobile-first).
- **Backend:** Maybe Python, or whatever suits best
- **DB:** Supabase.
- **Payments:** Stripe + MobilePay integration.
- **Auth:** Secure login, GDPR compliance (EU servers). through supabase cloud
- **Hosting:** Vercel cloud
- **Communication:** Twilio/Mailgun/Mailchimp for email/SMS
- **Analytics:** Amplitude for product tracking.

---

## **6. ðŸ§ª Testing & QA**

- Unit tests: ordering, wallet updates, subscription changes.
- Manual QA: tokens deducted correctly, order confirmed, delivery scheduled.
- Staging environment before release.
- Load test with 500 concurrent members (Year 1 target).

---

## **7. ðŸš€ V1 vs V2**

### **V1 Scope**

- Member onboarding (sign-up, profile).
- Subscription + wallet logic.
- Menu + ordering flow.
- Delivery scheduling (zone-based).
- Notifications (order confirmations, reminders).
- Admin back-end (ingredients, menu, orders export).

### **V2 (Future)**

- Member reviews + ratings.
- Community leaderboard/referral tracking.
- QR code scanning for freezer inventory.
- Route optimization API.
- Advanced analytics + profitability reports.

---

## **8. ðŸ§± Dependencies**

- Stripe/MobilePay accounts set up.
- Delivery zones finalized.
- Ingredient & dish data uploaded.
- Content (photos, copy) for dish pages.

## **9. ðŸ§± Pages**

- Landing Page (Home) -> Are you a member? Then: Log in. No? Then: Getting a tour of the club (Guest Mode).
- Tour of the club (Guest Mode) -> Discover Food & Concept -> Menu Overview Page -> Small Guest Surprize (trial tockens for a meal) -> Small explanation (How it works, tokens, pricing, what happens now) -> Want to taste? ->  Menu Ordering View (make an order) -> Select a postal zip code -> If we cover that area, go on with the checkout. If not, we re sorry, sign up to keep up to date with us
- After log in -> Dashboard (Home) (For logged in/member state) (+a greeting message)
- Dashboard (Home) (For logged in/member state): Account, Menu/Order, Cart
- Account: Account details (Personal Info, Billing/Payment), Wallet & Membership (Token balance, Membership(Active Plan, Change Plan, Pause/Resume, Cancel, Renew, Invoice History)), Orders (order history, upcoming/active order)
- 



- Login -> 
- Sign up -> 
- Dashboard (Home) (For logged in/member state) -> 
- Menu Overview Page (for guests and members) -> 
- Menu Detail Page (for guests and members) -> 
- Order History (for members) -> 
- Subscription (for members) -> 
- Account (for members) -> 
- Settings (for members) -> 
- Notifications -> 
- Help -> 
- About -> 
- Contact -> 
- Logout -> 
-
-
-
-
-